<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <title>Dados Água SP</title>
  </head>
  <body>
    <h1>Clientes Premium</h1>
    <div id="data"></div>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script>
      $(function () {

        var clients;

        $.getJSON('data/clientesPremiumSabesp.json', function( data ) {
          clients = data;
          showList();
        });

        $(window).on('hashchange', function () {
          if (!location.hash || location.hash === '#all') {
            showList();
          } else {
            showDetail();
          }
        });

        function showList() {
          var items = [];
          $.each(clients, function( key, val ) {
            if (val.agua) {
              items.push('<a href="#' + (val.id - 1) + '">' + val.nome + '</a><br>');
            }
          });
          $('#data').html(items.join(''));
        }

        function showDetail() {
          var client = clients[location.hash.substring(1)];
          $('#data').html(JSON.stringify(client) + '<br><a href="#all">Todos</a>');

          //CÓDIGO AQUI!!!

        };

      });
    </script>
  </body>
</html>
